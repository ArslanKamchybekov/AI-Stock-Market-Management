{"version":3,"file":"detectFiberTags.js","names":["getFiber","element","container","global","document","createElement","inst","Tester","React","Component","ReactDOM","render","_reactInternals","child","getLazyFiber","LazyComponent","SuspenseWrapper","Suspense","fallback","module","exports","detectFiberTags","supportsMode","StrictMode","supportsContext","createContext","supportsForwardRef","forwardRef","supportsMemo","memo","supportsProfiler","unstable_Profiler","Profiler","supportsSuspense","supportsLazy","lazy","Fn","Cls","Ctx","FwdRef","props","ref","fakeDynamicImport","HostRoot","tag","ClassComponent","Fragment","FunctionalComponent","MemoSFC","MemoClass","HostPortal","createPortal","HostComponent","HostText","Mode","ContextConsumer","Consumer","ContextProvider","Provider","value","ForwardRef","id","onRender","Lazy","OffscreenComponent"],"sources":["../src/detectFiberTags.js"],"sourcesContent":["import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { fakeDynamicImport } from 'enzyme-adapter-utils';\r\n\r\nfunction getFiber(element) {\r\n  const container = global.document.createElement('div');\r\n  let inst = null;\r\n  class Tester extends React.Component {\r\n    render() {\r\n      inst = this;\r\n      return element;\r\n    }\r\n  }\r\n  ReactDOM.render(React.createElement(Tester), container);\r\n  return inst._reactInternals.child;\r\n}\r\n\r\nfunction getLazyFiber(LazyComponent) {\r\n  const container = global.document.createElement('div');\r\n  let inst = null;\r\n  // eslint-disable-next-line react/prefer-stateless-function\r\n  class Tester extends React.Component {\r\n    render() {\r\n      inst = this;\r\n      return React.createElement(LazyComponent);\r\n    }\r\n  }\r\n  // eslint-disable-next-line react/prefer-stateless-function\r\n  class SuspenseWrapper extends React.Component {\r\n    render() {\r\n      return React.createElement(\r\n        React.Suspense,\r\n        { fallback: false },\r\n        React.createElement(Tester),\r\n      );\r\n    }\r\n  }\r\n  ReactDOM.render(React.createElement(SuspenseWrapper), container);\r\n  return inst._reactInternals.child;\r\n}\r\n\r\nmodule.exports = function detectFiberTags() {\r\n  const supportsMode = typeof React.StrictMode !== 'undefined';\r\n  const supportsContext = typeof React.createContext !== 'undefined';\r\n  const supportsForwardRef = typeof React.forwardRef !== 'undefined';\r\n  const supportsMemo = typeof React.memo !== 'undefined';\r\n  const supportsProfiler = typeof React.unstable_Profiler !== 'undefined' || typeof React.Profiler !== 'undefined';\r\n  const supportsSuspense = typeof React.Suspense !== 'undefined';\r\n  const supportsLazy = typeof React.lazy !== 'undefined';\r\n\r\n  function Fn() {\r\n    return null;\r\n  }\r\n  // eslint-disable-next-line react/prefer-stateless-function\r\n  class Cls extends React.Component {\r\n    render() {\r\n      return null;\r\n    }\r\n  }\r\n  let Ctx = null;\r\n  let FwdRef = null;\r\n  let LazyComponent = null;\r\n  if (supportsContext) {\r\n    Ctx = React.createContext();\r\n  }\r\n  if (supportsForwardRef) {\r\n    // React will warn if we don't have both arguments.\r\n    // eslint-disable-next-line no-unused-vars\r\n    FwdRef = React.forwardRef((props, ref) => null);\r\n  }\r\n  if (supportsLazy) {\r\n    LazyComponent = React.lazy(() => fakeDynamicImport(() => null));\r\n  }\r\n\r\n  return {\r\n    HostRoot: getFiber('test').return.return.tag, // Go two levels above to find the root\r\n    ClassComponent: getFiber(React.createElement(Cls)).tag,\r\n    Fragment: getFiber([['nested']]).tag,\r\n    FunctionalComponent: getFiber(React.createElement(Fn)).tag,\r\n    MemoSFC: supportsMemo\r\n      ? getFiber(React.createElement(React.memo(Fn))).tag\r\n      : -1,\r\n    MemoClass: supportsMemo\r\n      ? getFiber(React.createElement(React.memo(Cls))).tag\r\n      : -1,\r\n    HostPortal: getFiber(ReactDOM.createPortal(null, global.document.createElement('div'))).tag,\r\n    HostComponent: getFiber(React.createElement('span')).tag,\r\n    HostText: getFiber('text').tag,\r\n    Mode: supportsMode\r\n      ? getFiber(React.createElement(React.StrictMode)).tag\r\n      : -1,\r\n    ContextConsumer: supportsContext\r\n      ? getFiber(React.createElement(Ctx.Consumer, null, () => null)).tag\r\n      : -1,\r\n    ContextProvider: supportsContext\r\n      ? getFiber(React.createElement(Ctx.Provider, { value: null }, null)).tag\r\n      : -1,\r\n    ForwardRef: supportsForwardRef\r\n      ? getFiber(React.createElement(FwdRef)).tag\r\n      : -1,\r\n    Profiler: supportsProfiler\r\n      ? getFiber(React.createElement((React.Profiler || React.unstable_Profiler), { id: 'mock', onRender() {} })).tag\r\n      : -1,\r\n    Suspense: supportsSuspense\r\n      ? getFiber(React.createElement(React.Suspense, { fallback: false })).tag\r\n      : -1,\r\n    Lazy: supportsLazy\r\n      ? getLazyFiber(LazyComponent).tag\r\n      : -1,\r\n    OffscreenComponent: getLazyFiber('div').return.return.tag,\r\n  };\r\n};\r\n"],"mappings":"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"}